image:
  repository: josxha/minecraft-purpur
  tag: 1.21.5
  pullPolicy: IfNotPresent

version: "1.21.5"

replicaCount: 1

service:
  type: ClusterIP
  port: 25565
  headless: true

jvm:
  opts: "-Xms1g -Xmx3g -XX:+UseG1GC -XX:MaxGCPauseMillis=75 -Dfile.encoding=UTF-8"

resources:
  requests:
    cpu: "1000m"
    memory: "3Gi"
  limits:
    cpu: "1"
    memory: "4Gi"

health:
  port: 8080

velocity:
  forwardingSecret: "minecraft-secret-key"
  allowedNamespaceLabel: "app.kubernetes.io/name=velocity"

server:
  onlineMode: false
  velocity:
    enabled: true
    secret: "minecraft-secret-key"
    forwardingMode: "modern"

persistence:
  enabled: true
  size: 10Gi
  storageClass: ""
  shared: true
  hostPath:
    path: "/var/lib/minecraft/purpur-lobby-world"
    nodeName: ""

plugins:
  persistence:
    enabled: true
    size: 5Gi
    storageClass: ""
  configs:
    player_mechanics:
      config.yml: |
        sleep:
            # Как быстро игрок устает, когда не спит (бодрствует).
            decrease_rate_per_second: 0.00013889

            # Как быстро игрок отдыхает, когда спит.
            increase_rate_per_second: 0.00111111

            # Порог, при котором начинают применяться дебаффы (например, Замедление 1).
            debuff_threshold: 0.0

            # Порог, при котором дебаффы усиливаются (например, Замедление 2).
            # Должен быть меньше, чем debuff_threshold.
            # Можно использовать отрицательные значения, если нужно, чтобы дебафф
            # применялся некоторое время после полного истощения.
            heavy_debuff_threshold: -0.2

        thirst:
            # Как быстро игрок испытывает жажду.
            # Значение 0.004 примерно в 2 раза быстрее, чем стандартный расход голода при беге.
            decrease_rate_per_second: 0.004

            # Количество жажды, которое восстанавливает одна бутылка воды (1.0 = вся шкала).
            water_bottle_heal_amount: 0.3

            dehydration:
                # Количество урона, наносимого игроку периодически (1.0 = полсердца).
                damage_amount: 1.0

                # Интервал в тиках, с которым наносится урон (20 тиков = 1 секунда). Ванильный голод - 80.
                damage_interval_ticks: 80

                # Длительность эффекта Слабости в тиках.
                weakness_duration_ticks: 120

                # Длительность эффекта Слепоты в тиках.
                blindness_duration_ticks: 60

            # Множитель жажды в определенных биомах.
            biome_modifiers:
                # Во сколько раз быстрее будет уходить жажда в указанных биомах.
                multiplier: 2.0

                # Список биомов, в которых жажда будет уходить быстрее.
                biomes:
                    - "biome.minecraft.desert"
                    - "biome.minecraft.badlands"

        health:

            # Максимальное здоровье для активации восстановления (дефолт 3 сердца)
            max_for_healing: 6.0

            # Количество здоровья, которое восстанавливает палка (дефолт 2 сердца)
            heal_amount: 4.0


        # Как часто (в тиках) обновляется полоса усталости и проверяются дебаффы.
        update_interval_ticks: 10
    RPG-Races:
      config.yml: |
        # Тут пока будут лежать базовые хар-тики рас
        human:
         jump_height: 1
         sizes: 1
         speed:
          night: 1
          day: 1

        elf:
         jump_height: 1.25
         sizes: 1.25
         speed:
          night: 1.12
          day: 1.07

        zoomorph:
         jump_height: 1.25
         sizes: 1
         speed:
          night: 1
          day: 1

        tiefling:
         jump_height: 1
         sizes: 1
         speed:
          night: 1
          day: 1

        dwarf:
         jump_height: 1
         sizes: 0.75
         speed:
          night: 0.95
          day: 0.95
  list:
    - name: gr-core-plugin
      type: github
      repository: BryuggemanNikita/gr-core-plugin
      version: develop
      artifact: gr-core-plugin-1.0.0.jar
    - name: gr-player-plugin
      type: github
      repository: BryuggemanNikita/gr-player-plugin
      version: develop
      artifact: gr-player-plugin-1.0.0.jar
    - name: gr-race-plugin
      type: github
      repository: BryuggemanNikita/gr-race-plugin
      version: develop
      artifact: gr-race-plugin-1.0.0.jar
    - name: ProtocolLib
      type: url
      url: https://github.com/dmulloy2/ProtocolLib/releases/download/5.4.0/ProtocolLib.jar

plugin:
  enabled: false
  name: "purpur-plugin-1.0.0.jar"
  config:
    economy:
      url: "http://economy-api:8080"
      timeout: 5000
    redis:
      host: "redis"
      port: 6379
      timeout: 5000

tolerations:
  - key: "node-role.kubernetes.io/control-plane"
    operator: "Exists"
    effect: "NoSchedule"
  - key: "node-role.kubernetes.io/master"
    operator: "Exists"
    effect: "NoSchedule"

nodeSelector: {}

